using System;									// System contains a lot of default C# libraries 
using GXPEngine;								// GXPEngine contains the engine

namespace GXPEngine
{
    class Healthbar_Player : AnimationSprite
    {
        Sound _deathSound;

        public Healthbar_Player() : base("healthbar_tile.png", 6, 1)
        {
            Spawn();

            _deathSound = new Sound("death_sound_player.wav", false, false);
        }

        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        //                                                                                                                        Spawn()
        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        void Spawn()
        {
            Globals.health = 5;
        }

        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        //                                                                                                                        HandleGameOver()
        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        void HandleGameOver()
        {
            if (Globals.health == 0 && Globals.playerIsDead == false)
            {
                Globals.playerIsDead = true;

                MyGame mygame = game as MyGame;
                mygame.GameOver();

                _deathSound.Play();
            }
        }

        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        //                                                                                                                        Update()
        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        void Update()
        {
            SetFrame(Globals.health);
            HandleGameOver();
        }
    }
}
