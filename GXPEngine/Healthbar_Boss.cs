using System;
using GXPEngine;

namespace GXPEngine
{
    class Healthbar_Boss : AnimationSprite
    {
        Sound _deathSound;

        public Healthbar_Boss() : base("healthbar_tile.png", 6, 1)
        {
            Spawn();

            _deathSound = new Sound("death_sound_boss.wav", false, false);
        }

        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        //                                                                                                                        Spawn()
        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        void Spawn()
        {
            Globals.health_boss = 5;
            Globals.bossDeathSoundHasPlayed = false;
        }

        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        //                                                                                                                        HandleDeath()
        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        void HandleDeath()
        {
            if (Globals.health_boss == 0 && Globals.bossIsDead == false)
            {
                Globals.bossIsDead = true;

                if (Globals.bossDeathSoundHasPlayed == false)
                {
                    _deathSound.Play();
                    Globals.bossDeathSoundHasPlayed = true;
                }
            }
        }

        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        //                                                                                                                        Update()
        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        void Update()
        {
            SetFrame(Globals.health_boss);
            HandleDeath();
        }
    }
}
