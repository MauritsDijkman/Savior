using System;
using GXPEngine;

namespace GXPEngine
{
    class Hitbox_Boss : Sprite
    {
        bool BossDamagetake;
        float Damagecounter;

        public Hitbox_Boss() : base("hitbox_boss.png")
        {
            //visible = false;

            Spawn();
        }

        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        //                                                                                                                        Spawn()
        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        void Spawn()
        {
            SetOrigin(width / 2, height / 2);
            SetXY(-240, 590);

            Globals.bossIsAttacking = false;
            Globals.bossIsDead = false;
            BossDamagetake = true;
        }

        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        //                                                                                                                        OnCollision()
        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        public void OnCollision(GameObject other)
        {
            if (BossDamagetake == false)
            {
                Damagecounter = Damagecounter + 1;
            }

            if (Damagecounter == 200)
            {
                BossDamagetake = true;
                Damagecounter = 0;
            }

            if (other is Hitbox_Fist && Globals.bossIsAttacking == false && Globals.bossIsDead == false && Globals.playerIsAttacking == true && BossDamagetake == true)
            {
                Globals.health_boss = Globals.health_boss - 1;
                BossDamagetake = false;
            }
        }

        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        //                                                                                                                        HandleDeath()
        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        void HandleDeath()
        {
            if (Globals.bossIsDead == true)
            {
                LateDestroy();
                LateRemove();
            }
        }

        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        //                                                                                                                        Update()
        //----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
        void Update()
        {
            HandleDeath();
        }
    }
}
